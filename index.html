<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>íŠ¸ë Œë¹„ ë¹„ë””ì˜¤ì»¤ë¨¸ìŠ¤ ì¶”ì²œ ê°œì„  - UI Mockup</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #111; min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px 0; }

  @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  .toggle-group { display: flex; gap: 4px; background: #1F2937; border-radius: 12px; padding: 4px; margin-bottom: 20px; }
  .toggle-btn { padding: 10px 24px; border-radius: 10px; border: none; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
  .toggle-btn.active { background: #7C3AED; color: #fff; }
  .toggle-btn:not(.active) { background: transparent; color: #9CA3AF; }

  .phone { width: 375px; height: 812px; background: #000; border-radius: 40px; border: 3px solid #333; position: relative; overflow: hidden; box-shadow: 0 25px 60px rgba(0,0,0,0.5); }
  .status-bar { height: 44px; background: rgba(0,0,0,0.8); display: flex; justify-content: space-between; align-items: center; padding: 0 24px; color: #fff; font-size: 13px; font-weight: 600; position: relative; z-index: 50; }
  .notch { position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%); width: 120px; height: 28px; background: #000; border-radius: 14px; }

  .video-area { position: absolute; top: 44px; left: 0; right: 0; bottom: 0; background: linear-gradient(180deg, #2D2D2D 0%, #1a1a2e 50%, #2D2D2D 100%); }
  .bag-mockup { width: 180px; height: 240px; background: linear-gradient(135deg, #D4A574, #C4915A); border-radius: 16px; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 32px rgba(0,0,0,0.3); transition: opacity 0.3s; }
  .bag-mockup .logo { width: 60px; height: 60px; border: 2px dashed rgba(0,0,0,0.3); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; color: rgba(0,0,0,0.3); }
  .video-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); text-align: center; transition: opacity 0.3s; }

  .side-btns { position: absolute; right: 16px; top: 35%; display: flex; flex-direction: column; gap: 20px; align-items: center; z-index: 10; }
  .side-btn { text-align: center; }
  .side-btn-icon { width: 44px; height: 44px; background: rgba(255,255,255,0.15); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; }
  .side-btn-label { font-size: 10px; color: rgba(255,255,255,0.7); margin-top: 4px; }

  .product-bar { position: absolute; bottom: 0; left: 0; right: 0; z-index: 20; }
  .product-info { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); }
  .product-thumb { width: 48px; height: 48px; border-radius: 8px; background: #D4A574; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; color: rgba(0,0,0,0.4); }
  .product-detail { flex: 1; min-width: 0; }
  .product-detail .brand { font-size: 13px; font-weight: 600; color: #fff; }
  .product-detail .name { font-size: 12px; color: rgba(255,255,255,0.7); }
  .product-detail .price-row { display: flex; gap: 4px; align-items: baseline; }
  .product-detail .discount { font-size: 13px; font-weight: 700; color: #A78BFA; }
  .product-detail .price { font-size: 14px; font-weight: 700; color: #fff; }
  .rec-btn { padding: 8px 14px; border-radius: 20px; background: rgba(124,58,237,0.9); border: none; color: #fff; font-size: 12px; font-weight: 600; cursor: pointer; white-space: nowrap; box-shadow: 0 2px 12px rgba(124,58,237,0.4); display: none; }
  .rec-btn.show { display: block; }
  .swipe-bar { background: rgba(0,0,0,0.8); padding: 8px 0 24px; text-align: center; font-size: 12px; color: rgba(255,255,255,0.5); }
  .close-btn { position: absolute; top: 12px; left: 16px; z-index: 40; width: 36px; height: 36px; border-radius: 50%; background: rgba(255,255,255,0.15); border: none; color: #fff; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
  .flow-label { position: absolute; top: 14px; left: 50%; transform: translateX(-50%); z-index: 40; color: #fff; font-size: 11px; font-weight: 700; padding: 4px 12px; border-radius: 12px; white-space: nowrap; }
  .flow-label.as-is { background: rgba(239,68,68,0.9); }
  .flow-label.to-be { background: rgba(34,197,94,0.9); }

  .rec-page { position: absolute; inset: 0; background: #fff; z-index: 35; animation: fadeIn 0.3s ease; overflow-y: auto; display: none; }
  .rec-page.show { display: block; }
  .rec-page-header { padding: 20px 16px 8px; display: flex; align-items: center; }
  .rec-page-header .back { background: none; border: none; font-size: 20px; cursor: pointer; color: #374151; padding: 4px 8px 4px 0; }
  .rec-page-header .title { font-size: 17px; font-weight: 700; color: #1F2937; }
  .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
  .product-card { cursor: pointer; border-radius: 12px; overflow: hidden; background: #fff; }
  .product-card .img-wrap { position: relative; aspect-ratio: 4/3; background: #F9FAFB; overflow: hidden; border-radius: 10px; }
  .product-card .img-wrap img { width: 100%; height: 100%; object-fit: cover; }
  .product-card .card-info { padding: 6px 4px; }
  .product-card .card-brand { font-size: 12px; font-weight: 600; color: #1F2937; }
  .product-card .card-name { font-size: 11px; color: #6B7280; margin-top: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .product-card .card-price-row { margin-top: 2px; display: flex; align-items: baseline; gap: 4px; }
  .product-card .card-discount { font-size: 13px; font-weight: 700; color: #7C3AED; }
  .product-card .card-price { font-size: 13px; font-weight: 700; color: #1F2937; }
  .grade-badge { position: absolute; top: 8px; left: 8px; font-size: 11px; font-weight: 700; padding: 2px 8px; border-radius: 4px; z-index: 2; color: #fff; }
  .grade-badge.s-plus { background: #7C3AED; }
  .grade-badge.s { background: #8B5CF6; }
  .grade-badge.a-plus { background: #6366F1; }
  .grade-badge.a { background: #A78BFA; }
  .live-badge { position: absolute; top: 8px; right: 8px; background: #7C3AED; color: #fff; font-size: 10px; font-weight: 700; padding: 3px 8px; border-radius: 4px; display: flex; align-items: center; gap: 4px; z-index: 2; }
  .live-badge .play-icon { width: 0; height: 0; border-top: 4px solid transparent; border-bottom: 4px solid transparent; border-left: 6px solid #fff; }
  .rec-bottom-btns { padding: 16px; display: flex; gap: 8px; }
  .rec-bottom-btns .btn-exit { flex: 1; padding: 14px; border-radius: 12px; border: 1px solid #D1D5DB; background: #fff; font-size: 14px; font-weight: 600; cursor: pointer; color: #374151; }
  .rec-bottom-btns .btn-more { flex: 1; padding: 14px; border-radius: 12px; border: none; background: #7C3AED; font-size: 14px; font-weight: 700; cursor: pointer; color: #fff; }
  .problem-callout { margin: 8px 16px 16px; padding: 12px 16px; background: #FEF2F2; border-radius: 12px; border: 1px solid #FECACA; }
  .problem-callout .callout-title { font-size: 12px; font-weight: 700; color: #DC2626; margin-bottom: 4px; }
  .problem-callout .callout-text { font-size: 12px; color: #7F1D1D; line-height: 1.5; }

  /* Bottom Sheet */
  .bs-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.4); z-index: 30; display: none; }
  .bs-overlay.show { display: block; }
  .bs-container { position: absolute; bottom: 0; left: 0; right: 0; height: 85%; background: #fff; border-radius: 20px 20px 0 0; display: none; flex-direction: column; z-index: 31; animation: slideUp 0.3s ease-out; }
  .bs-container.show { display: flex; }
  .bs-handle { display: flex; justify-content: center; padding: 8px 0 2px; }
  .bs-handle div { width: 40px; height: 4px; border-radius: 2px; background: #D1D5DB; }
  .bs-header { display: flex; justify-content: space-between; align-items: center; padding: 4px 20px 8px; }
  .bs-header .bs-title { font-size: 17px; font-weight: 700; color: #1F2937; }
  .bs-header .bs-close { background: none; border: none; cursor: pointer; font-size: 22px; color: #9CA3AF; padding: 4px; line-height: 1; }
  .bs-filters { padding: 0 16px 6px; border-bottom: 1px solid #F3F4F6; }
  .filter-bar { display: flex; align-items: center; gap: 8px; padding-bottom: 6px; }
  .sort-select { padding: 7px 28px 7px 12px; border-radius: 8px; border: 1px solid #D1D5DB; background: #fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath d='M3 5l3 3 3-3' stroke='%236B7280' stroke-width='1.5' fill='none'/%3E%3C/svg%3E") no-repeat right 10px center; font-size: 13px; color: #374151; cursor: pointer; -webkit-appearance: none; appearance: none; font-weight: 500; }
  .filter-icon-btn { position: relative; width: 38px; height: 38px; border-radius: 10px; border: 1px solid #D1D5DB; background: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s; flex-shrink: 0; }
  .filter-icon-btn.active { border-color: #7C3AED; background: #F3EEFF; }
  .filter-icon-btn svg { width: 18px; height: 18px; stroke: #374151; fill: none; stroke-width: 2; stroke-linecap: round; }
  .filter-icon-btn.active svg { stroke: #7C3AED; }
  .filter-badge { position: absolute; top: -4px; right: -4px; min-width: 16px; height: 16px; border-radius: 8px; background: #7C3AED; color: #fff; font-size: 10px; font-weight: 700; display: flex; align-items: center; justify-content: center; padding: 0 4px; }
  .reset-text-btn { padding: 7px 12px; border-radius: 8px; border: none; background: none; color: #EF4444; font-size: 13px; font-weight: 600; cursor: pointer; white-space: nowrap; display: none; }
  .reset-text-btn:hover { background: #FEF2F2; }
  .filter-bar-spacer { flex: 1; }

  .filter-chip { padding: 6px 14px; border-radius: 20px; font-size: 13px; cursor: pointer; white-space: nowrap; transition: all 0.15s; }
  .filter-chip.active { border: 1.5px solid #7C3AED; background: #F3EEFF; color: #7C3AED; font-weight: 600; }
  .filter-chip:not(.active) { border: 1px solid #D1D5DB; background: #fff; color: #6B7280; font-weight: 400; }

  .filter-expanded { padding-top: 8px; padding-bottom: 4px; display: none; }
  .filter-expanded.show { display: block; }
  .filter-section { margin-bottom: 10px; }
  .filter-section-label { font-size: 12px; font-weight: 600; color: #9CA3AF; margin-bottom: 6px; }
  .filter-section .chips { display: flex; gap: 6px; flex-wrap: wrap; }

  .price-range { padding: 4px 0 2px; }
  .price-range-track { position: relative; height: 28px; }
  .price-range-fill { position: absolute; top: 12px; height: 4px; background: #7C3AED; border-radius: 2px; pointer-events: none; z-index: 1; }
  .price-slider { position: absolute; top: 0; left: 0; width: 100%; height: 28px; -webkit-appearance: none; appearance: none; background: transparent; pointer-events: none; z-index: 2; margin: 0; }
  .price-slider::-webkit-slider-runnable-track { height: 4px; background: #E5E7EB; border-radius: 2px; }
  .price-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: #7C3AED; border: 2px solid #fff; box-shadow: 0 1px 4px rgba(0,0,0,0.2); margin-top: -8px; pointer-events: all; cursor: pointer; position: relative; z-index: 3; }
  .price-slider::-moz-range-thumb { width: 20px; height: 20px; border-radius: 50%; background: #7C3AED; border: 2px solid #fff; box-shadow: 0 1px 4px rgba(0,0,0,0.2); pointer-events: all; cursor: pointer; }
  .price-slider::-moz-range-track { height: 4px; background: transparent; }
  .price-labels { display: flex; justify-content: space-between; font-size: 12px; color: #7C3AED; font-weight: 600; margin-top: 2px; }

  .bs-products { flex: 1; padding: 10px 12px; display: flex; flex-direction: column; overflow: hidden; }
  .bs-products .product-grid { flex: 0 0 auto; min-height: 0; }
  .empty-state { text-align: center; padding: 40px 0; color: #9CA3AF; display: none; }
  .empty-state.show { display: block; }
  .empty-state .emoji { font-size: 36px; margin-bottom: 8px; }
  .empty-state .msg { font-size: 14px; }
  .empty-state .reset-btn { margin-top: 12px; padding: 8px 20px; border-radius: 8px; border: 1px solid #D1D5DB; background: #fff; font-size: 13px; cursor: pointer; color: #6B7280; }

  /* Pagination */
  .pagination { display: flex; align-items: center; justify-content: center; gap: 12px; padding: 10px 0 4px; }
  .page-arrow { width: 34px; height: 34px; border-radius: 50%; border: 1.5px solid #E5E7EB; background: #fff; font-size: 18px; color: #374151; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s; flex-shrink: 0; }
  .page-arrow:hover:not(:disabled) { background: #F3EEFF; border-color: #7C3AED; color: #7C3AED; }
  .page-arrow:disabled { opacity: 0.25; cursor: default; }
  .page-dots { display: flex; gap: 6px; align-items: center; }
  .page-dot { width: 8px; height: 8px; border-radius: 50%; background: #D1D5DB; transition: all 0.2s; cursor: pointer; border: none; padding: 0; }
  .page-dot.active { width: 24px; border-radius: 4px; background: #7C3AED; }
  .page-counter { font-size: 13px; color: #9CA3AF; font-weight: 500; min-width: 40px; text-align: center; }

  .bs-cta { padding: 8px 12px; border-top: 1px solid #F3F4F6; background: #fff; flex-shrink: 0; }
  .bs-cta button { width: 100%; padding: 12px; border-radius: 12px; border: none; background: #7C3AED; color: #fff; font-size: 14px; font-weight: 700; cursor: pointer; }

  .instructions { margin-top: 24px; text-align: center; max-width: 375px; font-size: 14px; color: #9CA3AF; line-height: 1.6; }
</style>
</head>
<body>

<div class="toggle-group">
  <button class="toggle-btn active" id="asIsBtn" onclick="switchView('asIs')">AS-IS (í˜„ì¬)</button>
  <button class="toggle-btn" id="toBeBtn" onclick="switchView('toBe')">TO-BE (ê°œì„ )</button>
</div>

<div class="phone">
  <div class="status-bar"><span>9:41</span><div class="notch"></div><span>ğŸ“¶ ğŸ”‹</span></div>
  <div class="video-area">
    <div class="video-center" id="videoCenter"><div class="bag-mockup"><div class="logo">H</div></div></div>
    <div class="side-btns">
      <div class="side-btn"><div class="side-btn-icon">ğŸ”‡</div><div class="side-btn-label">ì†Œë¦¬</div></div>
      <div class="side-btn"><div class="side-btn-icon">â†—</div><div class="side-btn-label">ê³µìœ </div></div>
      <div class="side-btn"><div class="side-btn-icon">ğŸ›’</div><div class="side-btn-label">ì¥ë°”êµ¬ë‹ˆ</div></div>
      <div class="side-btn"><div class="side-btn-icon">â™¡</div><div class="side-btn-label">ì°œ</div></div>
    </div>
    <div class="product-bar">
      <div class="product-info">
        <div class="product-thumb">H</div>
        <div class="product-detail">
          <div class="brand">ì—ë¥´ë©”ìŠ¤</div>
          <div class="name">ì—ë¸”ë¦° 29 ì†”ë”ë°± ì¤‘ê³ </div>
          <div class="price-row"><span class="discount">5%</span><span class="price">3,610,000ì›</span></div>
        </div>
        <button class="rec-btn" id="recBtn" onclick="openBottomSheet()">ì¶”ì²œë³´ê¸°</button>
      </div>
      <div class="swipe-bar">ìŠ¤ì™€ì´í”„ â–¼</div>
    </div>
    <button class="close-btn" onclick="handleClose()">âœ•</button>
    <div class="flow-label as-is" id="flowLabel">ë‹«ê¸° â†’ ì¶”ì²œí˜ì´ì§€ í‘œì‹œ</div>

    <!-- AS-IS -->
    <div class="rec-page" id="recPage">
      <div class="rec-page-header"><button class="back" onclick="closeRecPage()">â€¹</button><span class="title">ì´ê°€ì› ê³ ê°ë‹˜, ì´ ìƒí’ˆì€ ì–´ë– ì„¸ìš”?</span></div>
      <div class="product-grid" id="recGrid" style="padding:16px;"></div>
      <div class="rec-bottom-btns"><button class="btn-exit" onclick="closeRecPage()">ë‚˜ê°€ê¸°</button><button class="btn-more">ë” ë§ì€ ìƒí’ˆ ë³´ê¸°</button></div>
      <div class="problem-callout"><div class="callout-title">âš ï¸ ë¬¸ì œì </div><div class="callout-text">ì˜ìƒ í´ë¦­ë¥  6~7%ë¡œ ëŒ€ë¶€ë¶„ ì‚¬ìš©ìê°€ ì¶”ì²œì„ ì†Œë¹„í•˜ì§€ ì•Šê³  ì´íƒˆ. ë¶ˆí•„ìš”í•œ depthê°€ UXë¥¼ ì €í•´í•¨.</div></div>
    </div>

    <!-- TO-BE Bottom Sheet -->
    <div class="bs-overlay" id="bsOverlay" onclick="closeBottomSheet()"></div>
    <div class="bs-container" id="bsContainer">
      <div class="bs-handle"><div></div></div>
      <div class="bs-header"><span class="bs-title">ì´ ìƒí’ˆì€ ì–´ë– ì„¸ìš”?</span><button class="bs-close" onclick="closeBottomSheet()">âœ•</button></div>
      <div class="bs-filters">
        <div class="filter-bar">
          <select class="sort-select" id="sortSelect" onchange="changeSort()">
            <option value="0">ì¶”ì²œìˆœ</option>
            <option value="1">ê°€ê²© ë‚®ì€ìˆœ</option>
            <option value="2">ê°€ê²© ë†’ì€ìˆœ</option>
            <option value="3">ì‹ ìƒí’ˆìˆœ</option>
          </select>
          <button class="filter-icon-btn" id="filterIconBtn" onclick="toggleFilters()">
            <svg viewBox="0 0 24 24"><line x1="4" y1="6" x2="20" y2="6"/><line x1="6" y1="12" x2="18" y2="12"/><line x1="9" y1="18" x2="15" y2="18"/></svg>
            <span class="filter-badge" id="filterBadge" style="display:none;">0</span>
          </button>
          <div class="filter-bar-spacer"></div>
          <button class="reset-text-btn" id="resetBtn" onclick="resetFilters()">ì´ˆê¸°í™”</button>
        </div>
        <div class="filter-expanded" id="filterExpanded">
          <div class="filter-section"><div class="filter-section-label">ë¸Œëœë“œ</div><div class="chips" id="brandChips"></div></div>
          <div class="filter-section"><div class="filter-section-label">ì¹´í…Œê³ ë¦¬</div><div class="chips" id="categoryChips"></div></div>
          <div class="filter-section">
            <div class="filter-section-label">ê°€ê²©ëŒ€</div>
            <div class="price-range">
              <div class="price-range-track" id="priceTrack">
                <div class="price-range-fill" id="priceFill"></div>
                <input type="range" class="price-slider" id="priceMin" min="0" max="20000000" step="500000" value="0" oninput="updatePrice()">
                <input type="range" class="price-slider" id="priceMax" min="0" max="20000000" step="500000" value="20000000" oninput="updatePrice()">
              </div>
              <div class="price-labels">
                <span id="priceLabelMin">0ì›</span>
                <span id="priceLabelMax">2,000ë§Œì›+</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="bs-products">
        <div class="product-grid" id="bsGrid"></div>
        <div class="empty-state" id="emptyState"><div class="emoji">ğŸ”</div><div class="msg">ì¡°ê±´ì— ë§ëŠ” ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤</div><button class="reset-btn" onclick="resetFilters()">í•„í„° ì´ˆê¸°í™”</button></div>
        <div class="pagination" id="pagination" style="display:none;">
          <button class="page-arrow" id="prevBtn" onclick="changePage(-1)">â€¹</button>
          <div class="page-dots" id="pageDots"></div>
          <span class="page-counter" id="pageCounter"></span>
          <button class="page-arrow" id="nextBtn" onclick="changePage(1)">â€º</button>
        </div>
      </div>
      <div class="bs-cta"><button>ë” ë§ì€ ìƒí’ˆ ë³´ê¸°</button></div>
    </div>
  </div>
</div>

<div class="instructions" id="instructions"><strong style="color:#EF4444">AS-IS:</strong> ì¢Œì¸¡ ìƒë‹¨ âœ• ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ì²œ í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”</div>

<script>
const PRODUCTS = [
  { id:1, brand:"ì—ë¥´ë©”ìŠ¤", name:"ì—ë¸”ë¦° 29 ì†”ë”ë°±", price:3610000, discount:5, grade:"A", live:true, img:"https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:2, brand:"ë£¨ì´ë¹„í†µ", name:"íŠ¸ë í‚¤ ì²´ì¸ í¬ë¡œìŠ¤ë°±", price:3325000, discount:5, grade:"S+", live:true, img:"https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:3, brand:"ìƒ¤ë„¬", name:"í´ë˜ì‹ ë¯¸ë””ì—„ í”Œë©", price:12500000, discount:0, grade:"A", live:false, img:"https://images.unsplash.com/photo-1594223274512-ad4803739b7c?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:4, brand:"ì—ë¥´ë©”ìŠ¤", name:"ê°€ë“ íŒŒí‹° 36 í† íŠ¸", price:2200000, discount:0, grade:"A", live:true, img:"https://images.unsplash.com/photo-1566150905458-1bf1fc113f0d?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:5, brand:"êµ¬ì°Œ", name:"GG ë§ˆëª¬íŠ¸ ìˆ„ë”ë°±", price:1850000, discount:10, grade:"S", live:false, img:"https://images.unsplash.com/photo-1575032617751-6ddec2089882?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:6, brand:"í”„ë¼ë‹¤", name:"ë¦¬ì—ë””ì…˜ 2005 ë‚˜ì¼ë¡ ", price:2100000, discount:0, grade:"A+", live:true, img:"https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:7, brand:"ë””ì˜¬", name:"ë ˆì´ë”” ë””ì˜¬ ë¯¸ë””ì—„", price:7800000, discount:0, grade:"A", live:true, img:"https://images.unsplash.com/photo-1614179689702-355944cd0918?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:8, brand:"ì…€ë¦°ëŠ", name:"íŠ¸ë¦¬ì˜¤í˜ ìˆ„ë”ë°±", price:4200000, discount:8, grade:"S+", live:false, img:"https://images.unsplash.com/photo-1612902456551-404b5c8e3d9d?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:9, brand:"ì—ë¥´ë©”ìŠ¤", name:"ë²„í‚¨ 25 í† ê³ ", price:18050000, discount:5, grade:"S+", live:true, img:"https://images.unsplash.com/photo-1559563458-527698bf5295?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:10, brand:"ë£¨ì´ë¹„í†µ", name:"ë„¤ë²„í’€ MM ëª¨ë…¸ê·¸ë¨", price:2450000, discount:0, grade:"A", live:false, img:"https://images.unsplash.com/photo-1591561954557-26941169b49e?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:11, brand:"ìƒ¤ë„¬", name:"ë³´ì´ë°± ë¯¸ë””ì—„ ìºë¹„ì–´", price:9800000, discount:3, grade:"A+", live:true, img:"https://images.unsplash.com/photo-1600857062241-98e5dba7f214?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:12, brand:"êµ¬ì°Œ", name:"ë””ì˜¤ë‹ˆì†ŒìŠ¤ ë¯¸ë‹ˆ GG", price:2600000, discount:0, grade:"A", live:false, img:"https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:13, brand:"ì—ë¥´ë©”ìŠ¤", name:"ì½˜ìŠ¤íƒ„ìŠ¤ 24 ì—í”„ì†œ", price:15200000, discount:0, grade:"S", live:false, img:"https://images.unsplash.com/photo-1566150902887-9679ecc155ba?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:14, brand:"ì—ë¥´ë©”ìŠ¤", name:"í”¼ì½”íƒ± 18 í´ë ˆë§ìŠ¤", price:4800000, discount:3, grade:"A+", live:true, img:"https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=300&h=300&fit=crop", category:"ê°€ë°©" },
  { id:15, brand:"ì—ë¥´ë©”ìŠ¤", name:"ë¦°ë”” 26 ì—ë²„ì»¬ëŸ¬", price:9500000, discount:0, grade:"A", live:false, img:"https://images.unsplash.com/photo-1566150905458-1bf1fc113f0d?w=300&h=300&fit=crop", category:"ê°€ë°©" },
];

const PER_PAGE = 4;
const BRANDS = ["ì—ë¥´ë©”ìŠ¤","ë£¨ì´ë¹„í†µ","ìƒ¤ë„¬","êµ¬ì°Œ","í”„ë¼ë‹¤","ì…€ë¦°ëŠ","ë””ì˜¬"];
const CATEGORIES = ["ì „ì²´","ê°€ë°©","ì§€ê°‘","ì‹ ë°œ","ì˜ë¥˜","ì•¡ì„¸ì„œë¦¬"];
const SORTS = ["ì¶”ì²œìˆœ","ê°€ê²© ë‚®ì€ìˆœ","ê°€ê²© ë†’ì€ìˆœ","ì‹ ìƒí’ˆìˆœ"];

let currentView = "asIs", selectedBrands = ["ì—ë¥´ë©”ìŠ¤"], selectedCategory = "ì „ì²´", sortIdx = 0, filtersOpen = false, page = 0, filtered = [];
let priceMin = 0, priceMax = 20000000;

function fmt(p) { return p.toLocaleString() + "ì›"; }
function gc(g) { return g === "S+" ? "s-plus" : g === "S" ? "s" : g === "A+" ? "a-plus" : "a"; }
function card(p) {
  return `<div class="product-card"><div class="img-wrap"><img src="${p.img}" alt="${p.name}"><span class="grade-badge ${gc(p.grade)}">${p.grade}</span>${p.live ? '<span class="live-badge"><span class="play-icon"></span>LIVE</span>' : ''}</div><div class="card-info"><div class="card-brand">${p.brand}</div><div class="card-name">${p.name}</div><div class="card-price-row">${p.discount > 0 ? `<span class="card-discount">${p.discount}%</span>` : ''}<span class="card-price">${fmt(p.price)}</span></div></div></div>`;
}

function switchView(v) {
  currentView = v;
  document.getElementById("asIsBtn").className = "toggle-btn" + (v==="asIs"?" active":"");
  document.getElementById("toBeBtn").className = "toggle-btn" + (v==="toBe"?" active":"");
  document.getElementById("recBtn").className = "rec-btn" + (v==="toBe"?" show":"");
  document.getElementById("flowLabel").className = "flow-label " + (v==="asIs"?"as-is":"to-be");
  document.getElementById("flowLabel").textContent = v==="asIs" ? "ë‹«ê¸° â†’ ì¶”ì²œí˜ì´ì§€ í‘œì‹œ" : "ë‹«ê¸° â†’ ë°”ë¡œ í™ˆìœ¼ë¡œ ë³µê·€";
  document.getElementById("instructions").innerHTML = v==="asIs"
    ? '<strong style="color:#EF4444">AS-IS:</strong> ì¢Œì¸¡ ìƒë‹¨ âœ• ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ì²œ í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”'
    : '<strong style="color:#22C55E">TO-BE:</strong> í•˜ë‹¨ <strong style="color:#A78BFA">ì¶”ì²œë³´ê¸°</strong> ë²„íŠ¼ì„ íƒ­í•˜ì—¬ ë°”í…€ì‹œíŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”';
  closeRecPage(); closeBottomSheet();
}

function handleClose() { if (currentView==="asIs") document.getElementById("recPage").classList.add("show"); }
function closeRecPage() { document.getElementById("recPage").classList.remove("show"); }

function openBottomSheet() {
  page = 0;
  document.getElementById("bsOverlay").classList.add("show");
  document.getElementById("bsContainer").classList.add("show");
  document.getElementById("videoCenter").style.opacity = "0.4";
  render();
}
function closeBottomSheet() {
  document.getElementById("bsOverlay").classList.remove("show");
  document.getElementById("bsContainer").classList.remove("show");
  document.getElementById("videoCenter").style.opacity = "1";
}

function toggleFilters() {
  filtersOpen = !filtersOpen;
  document.getElementById("filterExpanded").className = "filter-expanded" + (filtersOpen?" show":"");
  document.getElementById("filterIconBtn").className = "filter-icon-btn" + (filtersOpen?" active":"");
}

function changeSort() {
  sortIdx = parseInt(document.getElementById("sortSelect").value);
  page=0; render();
}

function toggleBrand(b) {
  selectedBrands = selectedBrands.includes(b) ? selectedBrands.filter(x=>x!==b) : [...selectedBrands,b];
  page=0; updateBrands(); updateResetChip(); render();
}
function selectCat(c) { selectedCategory=c; page=0; updateCats(); updateResetChip(); render(); }
function updatePrice() {
  let lo = parseInt(document.getElementById("priceMin").value);
  let hi = parseInt(document.getElementById("priceMax").value);
  if (lo > hi) { let t=lo; lo=hi; hi=t; document.getElementById("priceMin").value=lo; document.getElementById("priceMax").value=hi; }
  priceMin = lo; priceMax = hi;
  document.getElementById("priceLabelMin").textContent = (lo/10000).toLocaleString() + "ë§Œì›";
  document.getElementById("priceLabelMax").textContent = hi >= 20000000 ? "2,000ë§Œì›+" : (hi/10000).toLocaleString() + "ë§Œì›";
  // fill bar
  const pct = v => (v / 20000000) * 100;
  document.getElementById("priceFill").style.left = pct(lo) + "%";
  document.getElementById("priceFill").style.width = (pct(hi) - pct(lo)) + "%";
  page = 0; updateResetChip(); render();
}

function resetFilters() { selectedBrands=[]; selectedCategory="ì „ì²´"; sortIdx=0; priceMin=0; priceMax=20000000; page=0; filtersOpen=false; document.getElementById("filterExpanded").className="filter-expanded"; document.getElementById("filterIconBtn").className="filter-icon-btn"; document.getElementById("sortSelect").value="0"; document.getElementById("priceMin").value=0; document.getElementById("priceMax").value=20000000; document.getElementById("priceLabelMin").textContent="0ì›"; document.getElementById("priceLabelMax").textContent="2,000ë§Œì›+"; document.getElementById("priceFill").style.left="0%"; document.getElementById("priceFill").style.width="100%"; updateBrands(); updateCats(); updateResetChip(); render(); }

function updateResetChip() {
  let count = 0;
  if (selectedBrands.length > 0) count++;
  if (selectedCategory !== "ì „ì²´") count++;
  if (priceMin > 0 || priceMax < 20000000) count++;
  const badge = document.getElementById("filterBadge");
  const resetBtn = document.getElementById("resetBtn");
  const hasFilter = count > 0 || sortIdx !== 0;
  if (count > 0) { badge.style.display = "flex"; badge.textContent = count; } else { badge.style.display = "none"; }
  resetBtn.style.display = hasFilter ? "block" : "none";
}

function updateBrands() {
  document.getElementById("brandChips").innerHTML = BRANDS.map(b=>`<button class="filter-chip${selectedBrands.includes(b)?' active':''}" onclick="toggleBrand('${b}')">${b}</button>`).join("");
}
function updateCats() {
  document.getElementById("categoryChips").innerHTML = CATEGORIES.map(c=>`<button class="filter-chip${selectedCategory===c?' active':''}" onclick="selectCat('${c}')">${c}</button>`).join("");
}

function render() {
  filtered = PRODUCTS.filter(p => {
    if (selectedBrands.length>0 && !selectedBrands.includes(p.brand)) return false;
    if (selectedCategory!=="ì „ì²´" && p.category!==selectedCategory) return false;
    if (p.price < priceMin || p.price > priceMax) return false;
    return true;
  });
  if (SORTS[sortIdx]==="ê°€ê²© ë‚®ì€ìˆœ") filtered.sort((a,b)=>a.price-b.price);
  else if (SORTS[sortIdx]==="ê°€ê²© ë†’ì€ìˆœ") filtered.sort((a,b)=>b.price-a.price);

  const total = Math.ceil(filtered.length/PER_PAGE);
  if (page>=total) page = Math.max(0,total-1);

  const grid = document.getElementById("bsGrid");
  const empty = document.getElementById("emptyState");
  const pag = document.getElementById("pagination");

  if (filtered.length===0) {
    grid.style.display="none"; empty.classList.add("show"); pag.style.display="none"; return;
  }
  empty.classList.remove("show"); grid.style.display="grid";

  const start = page * PER_PAGE;
  grid.innerHTML = filtered.slice(start, start+PER_PAGE).map(card).join("");

  if (total<=1) { pag.style.display="none"; return; }

  pag.style.display = "flex";
  document.getElementById("prevBtn").disabled = (page===0);
  document.getElementById("nextBtn").disabled = (page===total-1);
  document.getElementById("pageCounter").textContent = (page+1)+" / "+total;

  const dots = document.getElementById("pageDots");
  dots.innerHTML = "";
  for (let i=0; i<total; i++) {
    const d = document.createElement("button");
    d.className = "page-dot"+(i===page?" active":"");
    d.onclick = ()=>goToPage(i);
    dots.appendChild(d);
  }
}

function changePage(dir) {
  const total = Math.ceil(filtered.length/PER_PAGE);
  const n = page+dir;
  if (n>=0 && n<total) { page=n; render(); }
}
function goToPage(p) { page=p; render(); }

// Init
document.getElementById("recGrid").innerHTML = PRODUCTS.slice(0,6).map(card).join("");
updateBrands(); updateCats(); updateResetChip(); render();
</script>
</body>
</html>
